<!DOCTYPE html>
<html>
<head>
  <title>Trip Details</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
  <script src='https://cdn.locatiniq.com/mapbox-gl.js'></script>
  <link href='https://cdn.locatiniq.com/mapbox-gl.css' rel='stylesheet' />
  <style>
    .clear-button {
      display: none;
      cursor: pointer;
      font-size: 16px;
      margin-left: -25px;
      margin-top: 5px;
    }
    .live-location {
      display: none;
      position: absolute;
      background: #fff;
      border: 1px solid #ccc;
      padding: 10px;
      z-index: 1000;
    }
    #map {
      width: 100%;
      height: 400px;
      margin-top: 20px;
    }
    @media (max-width: 768px) {
      .live-location {
        position: relative;
      }
      .input-container {
        flex-direction: column;
        align-items: flex-start;
      }
    }
  </style>
</head>
<body>
  <div class="banner">
    <div class="left">
      <h1>Car Owner - Trip Details</h1>
    </div>
    <div class="right">
      <button onclick="navigateTo('signup.html')">Sign Up</button>
      <button onclick="navigateTo('signin.html')">Sign In</button>
    </div>
  </div>
  <h2>Request a Driver</h2>
  <form id="trip-form">
    <label for="pickup">Pickup Location:</label>
    <div class="input-container" style="display: flex; align-items: center; position: relative;">
      <input type="text" id="pickup" name="pickup" placeholder="Enter start location" required>
      <span class="clear-button" id="clear-pickup">&#10006;</span>
      <div class="live-location" id="pickup-live-location"></div>
    </div><br><br>
    <label for="dropoff">Dropoff Location:</label>
    <div class="input-container" style="display: flex; align-items: center; position: relative;">
      <input type="text" id="dropoff" name="dropoff" placeholder="Enter destination" required>
      <span class="clear-button" id="clear-dropoff">&#10006;</span>
      <div class="live-location" id="dropoff-live-location"></div>
    </div><br><br>
    <label for="datetime">Date & Time:</label>
    <input type="datetime-local" id="datetime" name="datetime" required><br><br>
    <button type="submit">Book Now</button>
    <button type="button" onclick="scheduleLater()">Schedule for Later</button>
  </form>
  <div id="map"></div>
  <script src="script.js"></script>
  <script>
    $(document).ready(function() {
      $('#pickup').on('input', function() {
        $('#clear-pickup').toggle(!!this.value);
      });

      $('#clear-pickup').on('click', function() {
        $('#pickup').val('').trigger('input');
      });

      $('#dropoff').on('input', function() {
        $('#clear-dropoff').toggle(!!this.value);
      });

      $('#clear-dropoff').on('click', function() {
        $('#dropoff').val('').trigger('input');
      });

      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function(position) {
          const userLocation = [position.coords.longitude, position.coords.latitude];
          mapboxgl.accessToken = 'pk.3ff92f87d4bd491b6a78884f21390cf7';
          const map = new mapboxgl.Map({
            container: 'map',
            style: 'mapbox://styles/mapbox/streets-v11',
            center: userLocation,
            zoom: 12
          });
          new mapboxgl.Marker().setLngLat(userLocation).addTo(map);
        });
      } else {
        alert('Geolocation is not supported by this browser.');
      }
    });
  </script>
</body>
</html>
